
<%= render "layouts/small_banner"%>
<div class="container">
    <ul class="list-unstyled m-3 border-bottom">
      <% @items.each do |item| %>
      <li class="media border-top border-right border-left">
          <div class="d-flex justify-content-center p-2 col-md-3">
                      <img class=" mt-2" src="<%=item.image_url%>" alt="Generic placeholder image" style="height: 60px">
          </div>
          <div class="media-body p-2 border-left d-flex col-md-9 justify-content-center">
              <div class="col-md-6">
                  <h5 class="mt-3"><%= item.title%></h5>
                  <p><%= item.price%> €</p>
              </div> 
              <div class="col-md-6 d-flex align-items-end justify-content-end">  
                      <%= link_to "Retirer du panier", join_table_carts_item_path(JoinTableCartsItem.find_by(item_id:item.id, cart_id:@cart.id).id), method: :delete, class: 'btn btn-primary' %>
              </div>    
          </div>
      </li>
      <%end%>
    </ul>
    <div class=" container d-flex flex-row justify-content-end mt-2 pr-4"> 
      <%= form_tag user_orders_path() do %>
          <div class="w-10">
            <% if flash[:error].present? %>
              <div id="error_explanation">
                <p><%= flash[:error] %></p>
              </div>
            <% end %>
            <label class="amount">
              <span>Total : <%= @cart.total_price %> €</span>
            </label>
          </div>
          <button class="btn btn-secondary w-10">Valider
            <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
                    data-email="<%= current_user.email %>"
                    data-description="Merci de renseigner les informations ci-dessous"
                    data-amount="<%= @cart.total_price*100 %>"
                    data-locale="auto"
                    data-currency="eur"></script>
          </button>  
        <% end %>
    </div>
</div>